<!DOCTYPE html>
<html>
<head>
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
</head>
<body>
    <select id="year_select">
        <option value='2017'>2017</option>
        <option value='2018' selected>2018</option>
        <option value='2019'>2019</option>
        <option value='2020'>2020</option>
    </select>

    <div id="movie_histogram">

    </div>

    <div id="my_dataviz"></div>

    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://d3js.org/d3-array.v2.min.js"></script>
    <script src="script/movie_viz.js"></script>

    <script>
        /*
        // set the dimensions and margins of the graph
        var width = 460
        var height = 1000

        // append the svg object to the body of the page
        var svg = d3.select("#my_dataviz")
            .append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g")
            .attr("transform", "translate(40,0)");  // bit of margin on the left = 40

        // read json data
        d3.json("data/data_dendrogram.json").then( function(data) {
            console.log(data);
            // Create the cluster layout:
            var cluster = d3.cluster()
                .size([height, width - 100]);  // 100 is the margin I will have on the right side

            // Give the data to this cluster layout:
            var root = d3.hierarchy(data, function(d) {
                return d.children;
            });

            console.log(root);
            cluster(root);


            // Add the links between nodes:
            svg.selectAll('path')
                .data( root.descendants().slice(1) )
                .enter()
                .append('path')
                .attr("d", function(d) {
                    return "M" + d.y + "," + d.x
                        + "C" + (d.parent.y + 50) + "," + d.x
                        + " " + (d.parent.y + 150) + "," + d.parent.x // 50 and 150 are coordinates of inflexion, play with it to change links shape
                        + " " + d.parent.y + "," + d.parent.x;
                })
                .style("fill", 'none')
                .attr("stroke", '#ccc')


            // Add a circle for each node.
            svg.selectAll("g")
                .data(root.descendants())
                .enter()
                .append("g")
                .attr("transform", function(d) {
                    return "translate(" + d.y + "," + d.x + ")"
                })
                .append("circle")
                .attr("r", 7)
                .style("fill", "#69b3a2")
                .attr("stroke", "black")
                .style("stroke-width", 2)

        }, function (error, rows) {
            console.log(error);
        })

         */

    </script>
</body>
</html>